<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Standard Dashboard - PrepSharp</title>
    <link rel="stylesheet" href="../../assets/css/dashboard.css">
    <link rel="stylesheet" href="../../assets/css/dropdown-override.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        /* Standard plan specific styles */
        .sidebar-nav li.premium-feature {
            opacity: 1;
        }
        
        .plan-badge.standard {
            background-color: var(--accent-color);
        }
        
        .stat-icon {
            background-color: rgba(245, 158, 11, 0.1);
        }
        
        .stat-icon i {
            color: var(--accent-color);
        }
        
        .stat-info p {
            color: var(--accent-color);
        }
        
        .progress {
            background-color: var(--accent-color);
        }
        
        .advanced-features {
            margin-top: 30px;
        }
        
        .feature-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }
        
        .feature-card {
            background-color: var(--card-bg);
            border-radius: var(--border-radius);
            box-shadow: var(--shadow-sm);
            padding: 20px;
            transition: transform 0.2s ease, box-shadow 0.2s ease;
            border-top: 3px solid var(--accent-color);
        }
        
        .feature-card:hover {
            transform: translateY(-5px);
            box-shadow: var(--shadow-md);
        }
        
        .feature-icon {
            width: 50px;
            height: 50px;
            border-radius: 12px;
            background-color: rgba(245, 158, 11, 0.1);
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 15px;
        }
        
        .feature-icon i {
            font-size: 24px;
            color: var(--accent-color);
        }
        
        .feature-card h3 {
            font-size: 18px;
            font-weight: 600;
            margin-bottom: 10px;
        }
        
        .feature-card p {
            color: var(--text-light);
            font-size: 14px;
        }
        
        .study-plan-section {
            background-color: var(--card-bg);
            border-radius: var(--border-radius);
            box-shadow: var(--shadow-sm);
            padding: 20px;
            margin-top: 30px;
        }
        
        .study-plan-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }
        
        .study-plan-header h2 {
            font-size: 20px;
            font-weight: 600;
        }
        
        .study-plan-content {
            display: flex;
            gap: 20px;
        }
        
        .study-calendar {
            flex: 2;
            border: 1px solid rgba(0,0,0,0.1);
            border-radius: 8px;
            padding: 15px;
        }
        
        .study-tasks {
            flex: 1;
            border: 1px solid rgba(0,0,0,0.1);
            border-radius: 8px;
            padding: 15px;
        }
        
        .task-list {
            list-style: none;
        }
        
        .task-item {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 10px 0;
            border-bottom: 1px solid rgba(0,0,0,0.05);
        }
        
        .task-item:last-child {
            border-bottom: none;
        }
        
        .task-checkbox {
            width: 20px;
            height: 20px;
            border-radius: 4px;
            border: 2px solid var(--accent-color);
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
        }
        
        .task-checkbox.checked {
            background-color: var(--accent-color);
            color: white;
        }
        
        .task-content {
            flex: 1;
        }
        
        .task-title {
            font-weight: 500;
            margin-bottom: 2px;
        }
        
        .task-time {
            font-size: 12px;
            color: var(--text-light);
        }
        
        /* User dropdown styles */
        .user-profile {
            position: relative;
            cursor: pointer;
        }
        
        .avatar-initials {
            width: 36px;
            height: 36px;
            border-radius: 50%;
            background-color: var(--accent-color);
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 600;
            font-size: 14px;
            margin-right: 10px;
        }
        
        .user-dropdown {
            position: absolute;
            top: 100%;
            right: 0;
            width: 200px;
            background-color: white;
            border-radius: 8px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            padding: 10px 0;
            z-index: 100;
            opacity: 0;
            visibility: hidden;
            transform: translateY(-10px);
            transition: all 0.3s ease;
        }
        
        .dropdown-item {
            display: flex;
            align-items: center;
            padding: 10px 15px;
            color: var(--text-color);
            text-decoration: none;
            transition: background-color 0.2s;
        }
        
        .dropdown-item:hover {
            background-color: rgba(245, 158, 11, 0.05);
            color: var(--accent-color);
        }
        
        .dropdown-item i {
            margin-right: 10px;
            width: 16px;
            text-align: center;
        }
        
        .dropdown-divider {
            height: 1px;
            background-color: rgba(0,0,0,0.05);
            margin: 8px 0;
        }
    </style>
    <script src="../../assets/js/auth-redirect.js"></script>
    <!-- Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-LLJSLMXMNY"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'G-LLJSLMXMNY');
    </script>
</head>
<body>
    <div class="dashboard-container">
        <!-- Sidebar -->
        <aside class="sidebar">
            <div class="sidebar-header">
                <img src="../../prepsharp-logo.png" alt="PrepSharp Logo" class="logo">
                <h2>PrepSharp</h2>
            </div>
            
            <nav class="sidebar-nav">
                <ul>
                    <li class="active">
                        <a href="dashboard.html"><i class="fas fa-home"></i> <span>Dashboard</span></a>
                    </li>
                    <li>
                        <a href="practice-papers.html"><i class="fas fa-book"></i> <span>Practice Papers</span></a>
                    </li>
                    <li>
                        <a href="analytics.html"><i class="fas fa-chart-line"></i> <span>Analytics</span></a>
                    </li>
                    <li>
                        <a href="question-bank.html"><i class="fas fa-question-circle"></i> <span>Question Bank</span></a>
                    </li>
                    <li>
                        <a href="study-plan.html"><i class="fas fa-calendar-alt"></i> <span>Study Plan</span></a>
                    </li>
                    <li>
                        <a href="settings.html"><i class="fas fa-cog"></i> <span>Settings</span></a>
                    </li>
                </ul>
            </nav>
            
            <div class="sidebar-footer">
                <div class="plan-info">
                    <span class="plan-badge standard">Standard Plan</span>
                    <a href="#" class="upgrade-link">Upgrade to Premium</a>
                </div>
            </div>
        </aside>
        
        <!-- Main Content -->
        <main class="main-content">
            <!-- Top Navigation -->
            <header class="top-nav">
                <div class="user-actions">
                    <div class="notification-bell" id="notificationBell">
                        <i class="fas fa-bell"></i>
                        <span class="notification-count">5</span>
                    </div>
                    
                    <div class="user-profile" id="userProfile">
                        <div class="avatar-initials" id="userInitials">JS</div>
                        <span class="user-name" id="loggedInUserName">John Smith</span>
                        <i class="fas fa-chevron-down"></i>
                        <div class="user-dropdown">
                            <a href="#" class="dropdown-item"><i class="fas fa-user"></i> My Profile</a>
                            <a href="#" class="dropdown-item"><i class="fas fa-cog"></i> Settings</a>
                            <a href="#" class="dropdown-item"><i class="fas fa-question-circle"></i> Help</a>
                            <div class="dropdown-divider"></div>
                            <a href="#" class="dropdown-item logout-link"><i class="fas fa-sign-out-alt"></i> Logout</a>
                        </div>
                    </div>
                </div>
            </header>
            
            <!-- Dashboard Content -->
            <div class="dashboard-content">
                <div class="welcome-section">
                    <h1>Welcome to Standard Dashboard</h1>
                    <p>Access JEE Main & Advanced papers with detailed analytics</p>
                </div>
                
                <div class="stats-cards">
                    <div class="stat-card">
                        <div class="stat-icon">
                            <i class="fas fa-file-alt"></i>
                        </div>
                        <div class="stat-info">
                            <h3>Practice Papers</h3>
                            <p>24 Available</p>
                        </div>
                    </div>
                    
                    <div class="stat-card">
                        <div class="stat-icon">
                            <i class="fas fa-check-circle"></i>
                        </div>
                        <div class="stat-info">
                            <h3>Completed</h3>
                            <p>8 Papers</p>
                        </div>
                    </div>
                    
                    <div class="stat-card">
                        <div class="stat-icon">
                            <i class="fas fa-chart-pie"></i>
                        </div>
                        <div class="stat-info">
                            <h3>Average Score</h3>
                            <p>72%</p>
                        </div>
                    </div>
                    
                    <div class="stat-card">
                        <div class="stat-icon">
                            <i class="fas fa-tasks"></i>
                        </div>
                        <div class="stat-info">
                            <h3>Study Progress</h3>
                            <p>65%</p>
                        </div>
                    </div>
                </div>
                
                <div class="dashboard-grid">
                    <!-- Recent Papers -->
                    <div class="dashboard-card">
                        <div class="card-header">
                            <h2>Recent Practice Papers</h2>
                            <a href="practice-papers.html" class="view-all">View All</a>
                        </div>
                        <div class="card-content">
                            <ul class="paper-list">
                                <li class="paper-item">
                                    <div class="paper-info">
                                        <h3>JEE Advanced 2023 Paper 1</h3>
                                        <p>Physics, Chemistry, Mathematics</p>
                                    </div>
                                    <a href="#" class="start-btn">Start</a>
                                </li>
                                <li class="paper-item">
                                    <div class="paper-info">
                                        <h3>JEE Advanced 2023 Paper 2</h3>
                                        <p>Physics, Chemistry, Mathematics</p>
                                    </div>
                                    <a href="#" class="start-btn">Start</a>
                                </li>
                                <li class="paper-item">
                                    <div class="paper-info">
                                        <h3>JEE Main 2023 Paper 1</h3>
                                        <p>Physics, Chemistry, Mathematics</p>
                                    </div>
                                    <a href="#" class="start-btn">Start</a>
                                </li>
                            </ul>
                        </div>
                    </div>
                    
                    <!-- Performance Summary -->
                    <div class="dashboard-card">
                        <div class="card-header">
                            <h2>Performance Analytics</h2>
                        </div>
                        <div class="card-content">
                            <div class="performance-chart">
                                <canvas id="performanceChart"></canvas>
                            </div>
                            <div class="subject-scores">
                                <div class="subject-score">
                                    <span class="subject-name">Physics</span>
                                    <div class="progress-bar">
                                        <div class="progress" style="width: 70%;"></div>
                                    </div>
                                    <span class="score-value">70%</span>
                                </div>
                                <div class="subject-score">
                                    <span class="subject-name">Chemistry</span>
                                    <div class="progress-bar">
                                        <div class="progress" style="width: 78%;"></div>
                                    </div>
                                    <span class="score-value">78%</span>
                                </div>
                                <div class="subject-score">
                                    <span class="subject-name">Mathematics</span>
                                    <div class="progress-bar">
                                        <div class="progress" style="width: 65%;"></div>
                                    </div>
                                    <span class="score-value">65%</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Study Plan Section -->
                <div class="study-plan-section">
                    <div class="study-plan-header">
                        <h2>Your Personalized Study Plan</h2>
                        <a href="study-plan.html" class="view-all">View Full Plan</a>
                    </div>
                    <div class="study-plan-content">
                        <div class="study-calendar">
                            <h3>Today's Schedule</h3>
                            <div id="calendar" style="height: 200px; display: flex; align-items: center; justify-content: center;">
                                <p>Calendar visualization will appear here</p>
                            </div>
                        </div>
                        <div class="study-tasks">
                            <h3>Today's Tasks</h3>
                            <ul class="task-list">
                                <li class="task-item">
                                    <div class="task-checkbox checked">
                                        <i class="fas fa-check" style="font-size: 12px;"></i>
                                    </div>
                                    <div class="task-content">
                                        <div class="task-title">Complete Physics Module 5</div>
                                        <div class="task-time">9:00 AM - 11:00 AM</div>
                                    </div>
                                </li>
                                <li class="task-item">
                                    <div class="task-checkbox"></div>
                                    <div class="task-content">
                                        <div class="task-title">Solve JEE Main 2022 Chemistry Questions</div>
                                        <div class="task-time">1:00 PM - 3:00 PM</div>
                                    </div>
                                </li>
                                <li class="task-item">
                                    <div class="task-checkbox"></div>
                                    <div class="task-content">
                                        <div class="task-title">Mathematics Practice Test</div>
                                        <div class="task-time">4:00 PM - 5:30 PM</div>
                                    </div>
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>
                
                <!-- Standard Plan Features -->
                <div class="advanced-features">
                    <h2>Standard Plan Features</h2>
                    <div class="feature-grid">
                        <div class="feature-card">
                            <div class="feature-icon">
                                <i class="fas fa-book"></i>
                            </div>
                            <h3>JEE Main & Advanced Papers</h3>
                            <p>Access to all JEE Main and Advanced practice papers with detailed solutions.</p>
                        </div>
                        
                        <div class="feature-card">
                            <div class="feature-icon">
                                <i class="fas fa-chart-line"></i>
                            </div>
                            <h3>Detailed Analytics</h3>
                            <p>Track your progress with subject-wise performance analysis and improvement suggestions.</p>
                        </div>
                        
                        <div class="feature-card">
                            <div class="feature-icon">
                                <i class="fas fa-question-circle"></i>
                            </div>
                            <h3>Full Question Bank</h3>
                            <p>Access to the complete question bank with topic-wise practice questions.</p>
                        </div>
                        
                        <div class="feature-card">
                            <div class="feature-icon">
                                <i class="fas fa-calendar-alt"></i>
                            </div>
                            <h3>Personalized Study Plan</h3>
                            <p>Get a customized study schedule based on your strengths and weaknesses.</p>
                        </div>
                    </div>
                </div>
                
                <!-- Subscription Info -->
                <div class="subscription-card">
                    <div class="subscription-info">
                        <h2>Your Standard Plan</h2>
                        <ul class="feature-list">
                            <li><i class="fas fa-check"></i> Access to JEE Main & Advanced papers</li>
                            <li><i class="fas fa-check"></i> Detailed performance analytics</li>
                            <li><i class="fas fa-check"></i> Full question bank access</li>
                            <li><i class="fas fa-check"></i> Personalized study plan</li>
                        </ul>
                    </div>
                    <div class="upgrade-section">
                        <h3>Want more features?</h3>
                        <p>Upgrade to Premium plan for advanced features including AI recommendations and mock interviews</p>
                        <a href="#" class="upgrade-btn">Upgrade to Premium</a>
                    </div>
                </div>
            </div>
        </main>
    </div>
    
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="../../assets/js/dashboard-data.js"></script>
    <script>
        // User profile dropdown functionality
        document.addEventListener('DOMContentLoaded', function() {
            const userProfile = document.getElementById('userProfile');
            const userDropdown = document.querySelector('.user-dropdown');
            
            if (userProfile && userDropdown) {
                // Override the hover-based dropdown with click-based
                userProfile.addEventListener('click', function(e) {
                    userDropdown.style.opacity = userDropdown.style.opacity === '1' ? '0' : '1';
                    userDropdown.style.visibility = userDropdown.style.visibility === 'visible' ? 'hidden' : 'visible';
                    userDropdown.style.transform = userDropdown.style.transform === 'translateY(0px)' ? 'translateY(-10px)' : 'translateY(0px)';
                    e.stopPropagation();
                });
                
                // Close dropdown when clicking elsewhere
                document.addEventListener('click', function() {
                    userDropdown.style.opacity = '0';
                    userDropdown.style.visibility = 'hidden';
                    userDropdown.style.transform = 'translateY(-10px)';
                });
            }
        });
        
        // Load data and render the standard dashboard
        async function loadStandardDashboardData() {
            try {
                // Get user data and exam data
                const userData = await dashboardData.getUserData();
                const examData = await dashboardData.getExamData();
                const studyData = await dashboardData.getStudyPlanData();
                
                // Update user info
                document.querySelector('.user-name').textContent = userData.name;
                document.querySelector('.notification-count').textContent = userData.notifications;
                document.querySelector('.welcome-section h1').textContent = `Welcome, ${userData.name.split(' ')[0]}`;
                
                // Update stats
                document.querySelectorAll('.stat-info')[0].querySelector('p').textContent = '24 Available';
                document.querySelectorAll('.stat-info')[1].querySelector('p').textContent = userData.stats.papersCompleted;
                document.querySelectorAll('.stat-info')[2].querySelector('p').textContent = userData.stats.overallProgress + '%';
                document.querySelectorAll('.stat-info')[3].querySelector('p').textContent = userData.stats.planAdherence + '%';
                
                // Update subject scores
                const subjectScores = document.querySelectorAll('.subject-score');
                const physicsData = examData.performanceTrends.datasets.find(d => d.label === 'Physics');
                const chemistryData = examData.performanceTrends.datasets.find(d => d.label === 'Chemistry');
                const mathsData = examData.performanceTrends.datasets.find(d => d.label === 'Mathematics');
                
                if (physicsData && subjectScores[0]) {
                    const latestScore = physicsData.data[physicsData.data.length - 1];
                    subjectScores[0].querySelector('.progress').style.width = `${latestScore}%`;
                    subjectScores[0].querySelector('.score-value').textContent = `${latestScore}%`;
                }
                
                if (chemistryData && subjectScores[1]) {
                    const latestScore = chemistryData.data[chemistryData.data.length - 1];
                    subjectScores[1].querySelector('.progress').style.width = `${latestScore}%`;
                    subjectScores[1].querySelector('.score-value').textContent = `${latestScore}%`;
                }
                
                if (mathsData && subjectScores[2]) {
                    const latestScore = mathsData.data[mathsData.data.length - 1];
                    subjectScores[2].querySelector('.progress').style.width = `${latestScore}%`;
                    subjectScores[2].querySelector('.score-value').textContent = `${latestScore}%`;
                }
                
                // Create performance chart
                const ctx = document.getElementById('performanceChart').getContext('2d');
                const performanceChart = new Chart(ctx, {
                    type: 'line',
                    data: {
                        labels: examData.performanceTrends.labels,
                        datasets: [{
                            label: 'Score %',
                            data: examData.performanceTrends.datasets.reduce((acc, dataset) => {
                                // Average of all subjects for each month
                                return dataset.data.map((val, i) => {
                                    acc[i] = (acc[i] || 0) + val / examData.performanceTrends.datasets.length;
                                    return acc[i];
                                });
                            }, []),
                            borderColor: '#f59e0b',
                            backgroundColor: 'rgba(245, 158, 11, 0.1)',
                            tension: 0.3,
                            fill: true
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            legend: {
                                display: false
                            }
                        },
                        scales: {
                            y: {
                                beginAtZero: true,
                                max: 100
                            }
                        }
                    }
                });
                
                // Update paper list
                const paperList = document.querySelector('.paper-list');
                if (paperList) {
                    paperList.innerHTML = '';
                    
                    // Show all exams for standard plan
                    examData.upcomingExams.forEach(exam => {
                        const item = document.createElement('li');
                        item.className = 'paper-item';
                        item.innerHTML = `
                            <div class="paper-info">
                                <h3>${exam.title}</h3>
                                <p>${exam.date} â€¢ ${exam.questions} questions</p>
                            </div>
                            <a href="#" class="start-btn">Start</a>
                        `;
                        paperList.appendChild(item);
                    });
                }
                
                // Update tasks
                const taskList = document.querySelector('.task-list');
                if (taskList) {
                    taskList.innerHTML = '';
                    
                    // Show today's tasks
                    studyData.tasks.forEach((task, index) => {
                        const item = document.createElement('li');
                        item.className = 'task-item';
                        item.innerHTML = `
                            <div class="task-checkbox ${task.completed ? 'checked' : ''}">
                                ${task.completed ? '<i class="fas fa-check" style="font-size: 12px;"></i>' : ''}
                            </div>
                            <div class="task-content">
                                <div class="task-title">${task.title}</div>
                                <div class="task-time">${task.startTime} - ${task.endTime}</div>
                            </div>
                        `;
                        taskList.appendChild(item);
                    });
                }
                
                // Set up event listeners
                setupEventListeners();
                
            } catch (error) {
                console.error('Error loading standard dashboard data:', error);
            }
        }
        
        function setupEventListeners() {
            // Task checkbox functionality
            document.querySelectorAll('.task-checkbox').forEach(checkbox => {
                checkbox.addEventListener('click', function() {
                    this.classList.toggle('checked');
                    if (this.classList.contains('checked')) {
                        this.innerHTML = '<i class="fas fa-check" style="font-size: 12px;"></i>';
                    } else {
                        this.innerHTML = '';
                    }
                });
            });
        }
        
        // Load data when page loads
        document.addEventListener('DOMContentLoaded', function() {
            loadStandardDashboardData();
            
            
    </script>
    </script>
    <script src="../../assets/js/logout.js"></script>
</body>
</html>
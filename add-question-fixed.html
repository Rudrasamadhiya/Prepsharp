<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Add Question - PrepSharp</title>
    <!-- Original CSS styles remain unchanged -->
    <style>
        /* Original styles from add-question.html */
    </style>
</head>
<body>
    <header>
        <h2>PrepSharp - Add Question</h2>
        <div>
            <button id="summary-btn" class="btn secondary">View Summary</button>
            <button id="dashboard-btn" class="btn">Dashboard</button>
        </div>
    </header>
    
    <!-- Main content container -->
    <div class="container">
        <!-- Original question form content -->
    </div>

    <!-- Required scripts -->
    <script src="html2canvas.min.js"></script>
    <script src="screen-capture.js"></script>
    
    <!-- PDF.js library -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/2.11.338/pdf.min.js"></script>
    <script>
        pdfjsLib.GlobalWorkerOptions.workerSrc = 'https://cdnjs.cloudflare.com/ajax/libs/pdf.js/2.11.338/pdf.worker.min.js';
    </script>
    
    <!-- Simple direct PDF upload button -->
    <script>
        // Create PDF upload button
        const uploadContainer = document.createElement('div');
        uploadContainer.style.position = 'fixed';
        uploadContainer.style.top = '70px';
        uploadContainer.style.right = '20px';
        uploadContainer.style.zIndex = '999';
        uploadContainer.style.backgroundColor = 'rgba(255,255,255,0.9)';
        uploadContainer.style.padding = '10px';
        uploadContainer.style.borderRadius = '8px';
        uploadContainer.style.boxShadow = '0 2px 10px rgba(0,0,0,0.2)';
        uploadContainer.style.border = '2px solid #4caf50';
        
        const uploadBtn = document.createElement('button');
        uploadBtn.textContent = 'UPLOAD PDF FIRST';
        uploadBtn.style.padding = '10px 20px';
        uploadBtn.style.backgroundColor = '#4caf50';
        uploadBtn.style.color = 'white';
        uploadBtn.style.border = 'none';
        uploadBtn.style.borderRadius = '4px';
        uploadBtn.style.cursor = 'pointer';
        uploadBtn.style.fontWeight = 'bold';
        uploadBtn.style.fontSize = '16px';
        uploadBtn.style.width = '100%';
        
        const statusEl = document.createElement('div');
        statusEl.style.textAlign = 'center';
        statusEl.style.marginTop = '8px';
        statusEl.style.fontSize = '14px';
        statusEl.style.color = '#666';
        statusEl.style.fontWeight = 'bold';
        
        uploadContainer.appendChild(uploadBtn);
        uploadContainer.appendChild(statusEl);
        document.body.appendChild(uploadContainer);
        
        // PDF upload function
        uploadBtn.onclick = function() {
            const fileInput = document.createElement('input');
            fileInput.type = 'file';
            fileInput.accept = 'application/pdf';
            
            fileInput.onchange = function(e) {
                if (e.target.files.length > 0) {
                    const file = e.target.files[0];
                    
                    // Show loading status
                    statusEl.textContent = 'Loading PDF...';
                    statusEl.style.color = '#1976d2';
                    
                    // Create object URL for the PDF
                    const pdfUrl = URL.createObjectURL(file);
                    
                    // Store in ScreenCapture object
                    ScreenCapture.pdfUrl = pdfUrl;
                    ScreenCapture.pdfData = pdfUrl;
                    
                    // Set session flag
                    sessionStorage.setItem('prepsharp_pdf_loaded', 'true');
                    localStorage.setItem('prepsharp_pdf_name', file.name);
                    
                    // Update UI
                    statusEl.textContent = 'PDF loaded: ' + file.name;
                    statusEl.style.color = '#4caf50';
                    uploadBtn.textContent = 'Change PDF';
                    
                    alert('PDF uploaded successfully! You can now take screenshots from it.');
                }
            };
            
            fileInput.click();
        };
        
        // Check if PDF is already loaded
        window.addEventListener('DOMContentLoaded', function() {
            if (sessionStorage.getItem('prepsharp_pdf_loaded') === 'true') {
                const pdfName = localStorage.getItem('prepsharp_pdf_name');
                statusEl.textContent = pdfName ? 'PDF loaded: ' + pdfName : 'PDF loaded';
                statusEl.style.color = '#4caf50';
                uploadBtn.textContent = 'Change PDF';
            }
        });
    </script>
    
    <!-- Original scripts for question handling -->
</body>
</html>
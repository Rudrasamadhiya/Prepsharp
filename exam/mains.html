<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="mobile-web-app-capable" content="yes">
    <title>JEE Main 2024 27 Jan Shift 1 - PrepSharp</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="exam-style.css">
    <link rel="stylesheet" href="mobile-styles.css">

</head>
<body onload="initMobile()">
    <div class="exam-container">
        <!-- Top strip with NTA logo and user info -->
        <div class="top-strip">
            <img src="../images/nta logo.png" alt="NTA Logo" class="nta-logo">
            <div class="top-right-user">
                <div class="candidate-avatar square" id="userInitials">JS</div>
                <div class="candidate-info-container">
                    <div><span class="candidate-label">Candidate Name:</span> <span id="userName">John Smith</span></div>
                    <div><span class="candidate-label">Candidate ID:</span> <span id="userId">JEE2024001234</span></div>
                    <div><span class="candidate-label">Time Remaining:</span> <span class="time-remaining" id="timeRemaining">02:59:45</span></div>
                </div>
            </div>
        </div>
        
        <!-- Purple strip with system and lab info -->
        <div class="purple-strip">
            <div>System No.: <span id="systemNo">C32</span></div>
            <div>Lab No.: <span id="labNo">LAB-A</span></div>
        </div>
        
        <!-- Black strip with paper indicator and buttons -->
        <div class="black-strip">
            <div class="paper-indicator"><span id="examType">Loading...</span> <span id="paperYear"></span> <span id="paperName">Loading...</span></div>
            <div class="strip-buttons">
                <div class="strip-btn" id="viewPaper">
                    <i class="fas fa-file-alt"></i> Question Paper
                </div>
                <div class="strip-btn" id="viewInstructions">
                    <i class="fas fa-info-circle"></i> View Instructions
                </div>
                <div class="strip-btn">
                    <i class="fas fa-clock"></i> <span id="timer">03:00:00</span>
                </div>
            </div>
        </div>
        
        <!-- Main content area -->
        <div class="main-content">
            <!-- Left container - Question display and its footer -->
            <div class="left-container">
                <!-- Left panel - Question display -->
                <div class="left-panel">
                    <!-- Section tabs strip -->
                    <div class="sections-strip" id="sectionsStrip">
                        <div class="section-tab active">Physics Section 1<span class="info-button" title="Section information"><i class="fas fa-info-circle"></i></span></div>
                        <div class="section-tab">Physics Section 2<span class="info-button" title="Section information"><i class="fas fa-info-circle"></i></span></div>
                        <div class="section-tab">Chemistry Section 1<span class="info-button" title="Section information"><i class="fas fa-info-circle"></i></span></div>
                        <div class="section-tab">Chemistry Section 2<span class="info-button" title="Section information"><i class="fas fa-info-circle"></i></span></div>
                        <div class="section-tab">Mathematics Section 1<span class="info-button" title="Section information"><i class="fas fa-info-circle"></i></span></div>
                        <div class="section-tab">Mathematics Section 2<span class="info-button" title="Section information"><i class="fas fa-info-circle"></i></span></div>
                    </div>
                    
                    <!-- Blue language strip -->
                    <div class="language-strip">
                        <div class="language-selector">
                            View in: 
                            <select id="languageSelector">
                                <option>English</option>
                                <option>Hindi</option>
                            </select>
                        </div>
                    </div>
                    
                    <!-- Question area -->
                    <div class="question-area">
                        <!-- Watermark with grid layout -->
                        <div class="watermark">
                            <div class="watermark-text">JEE2024001234</div>
                            <div class="watermark-text">JEE2024001234</div>
                            <div class="watermark-text">JEE2024001234</div>
                            <div class="watermark-text">JEE2024001234</div>
                            <div class="watermark-text">JEE2024001234</div>
                            <div class="watermark-text">JEE2024001234</div>
                            <div class="watermark-text">JEE2024001234</div>
                            <div class="watermark-text">JEE2024001234</div>
                            <div class="watermark-text">JEE2024001234</div>
                            <div class="watermark-text">JEE2024001234</div>
                            <div class="watermark-text">JEE2024001234</div>
                            <div class="watermark-text">JEE2024001234</div>
                            <div class="watermark-text">JEE2024001234</div>
                            <div class="watermark-text">JEE2024001234</div>
                            <div class="watermark-text">JEE2024001234</div>
                        </div>
                        
                        <div class="question-number" id="questionNumber">Question No. 3</div>
                        
                        <div class="question-content">
                            <div class="question-text" id="questionText">
                                <p>A particle of mass m is moving in a circular orbit of radius r under the influence of an attractive central force F = -kr where k is a positive constant. If the angular momentum of the particle is L, then the total energy of the particle is:</p>
                            </div>
                            
                            <div class="question-image" id="questionImage">
                                <img src="https://prepsharp.com/images/questions/physics1.png" alt="Question 1">
                            </div>
                            
                            <div class="options" id="optionsList">
                                <!-- For MCQ questions -->
                                <div class="mcq-options" id="mcqOptions">
                                    <div class="option" style="display: block;">
                                        <input type="radio" name="q3" id="q3-a" class="option-radio">
                                        <label for="q3-a" class="option-label">
                                            <div class="option-letter">a)</div>
                                            <div class="option-text">L²/2mr² - kr²/2</div>
                                        </label>
                                    </div>
                                    
                                    <div class="option" style="display: block;">
                                        <input type="radio" name="q3" id="q3-b" class="option-radio">
                                        <label for="q3-b" class="option-label">
                                            <div class="option-letter">b)</div>
                                            <div class="option-text">L²/2mr² + kr²/2</div>
                                        </label>
                                    </div>
                                    
                                    <div class="option" style="display: block;">
                                        <input type="radio" name="q3" id="q3-c" class="option-radio">
                                        <label for="q3-c" class="option-label">
                                            <div class="option-letter">c)</div>
                                            <div class="option-text">L²/2mr² - kr²</div>
                                        </label>
                                    </div>
                                    
                                    <div class="option" style="display: block;">
                                        <input type="radio" name="q3" id="q3-d" class="option-radio" checked>
                                        <label for="q3-d" class="option-label">
                                            <div class="option-letter">d)</div>
                                            <div class="option-text">L²/mr² - kr²/2</div>
                                        </label>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Numerical Answer Section (for Section 2) -->
                            <div id="numericalSection" style="display: block; margin-top: 20px; background: #fffde7; border-radius: 12px; padding: 20px; border: 2px solid #f9a825; box-shadow: 0 4px 8px rgba(249, 168, 37, 0.15);">
                                <h3 style="margin-top: 0; color: #f9a825; font-size: 18px; text-align: center;">Numerical Answer</h3>
                                
                                <div style="margin-bottom: 15px;">
                                    <label for="numerical-answer" style="display: block; margin-bottom: 8px; font-weight: 600; color: #f57f17;">Your Answer:</label>
                                    <input type="text" id="numerical-answer" style="width: 100%; padding: 12px; font-size: 18px; border: 2px solid #f9a825; border-radius: 8px; text-align: center; background: white; box-shadow: 0 2px 6px rgba(249, 168, 37, 0.1);" readonly>
                                </div>
                                
                                <!-- On-screen keyboard -->
                                <div class="virtual-keyboard" style="display: grid; grid-template-columns: repeat(4, 1fr); gap: 6px; margin-bottom: 15px; max-width: 300px; margin: 0 auto 15px; touch-action: manipulation;">
                                    <button class="num-key" data-value="1" style="padding: 12px 8px; font-size: 16px; background: #fff9c4; border: 1px solid #f0e68c; border-radius: 6px; cursor: pointer; box-shadow: 0 2px 4px rgba(0,0,0,0.1); transition: all 0.2s ease; touch-action: manipulation;">1</button>
                                    <button class="num-key" data-value="2" style="padding: 12px 8px; font-size: 16px; background: #fff9c4; border: 1px solid #f0e68c; border-radius: 6px; cursor: pointer; box-shadow: 0 2px 4px rgba(0,0,0,0.1); transition: all 0.2s ease; touch-action: manipulation;">2</button>
                                    <button class="num-key" data-value="3" style="padding: 12px 8px; font-size: 16px; background: #fff9c4; border: 1px solid #f0e68c; border-radius: 6px; cursor: pointer; box-shadow: 0 2px 4px rgba(0,0,0,0.1); transition: all 0.2s ease; touch-action: manipulation;">3</button>
                                    <button class="num-key" data-value="+" style="padding: 12px 8px; font-size: 16px; background: #fffde7; border: 1px solid #f0e68c; border-radius: 6px; cursor: pointer; box-shadow: 0 2px 4px rgba(0,0,0,0.1); transition: all 0.2s ease; touch-action: manipulation;">+</button>
                                    <button class="num-key" data-value="4" style="padding: 12px 8px; font-size: 16px; background: #fff9c4; border: 1px solid #f0e68c; border-radius: 6px; cursor: pointer; box-shadow: 0 2px 4px rgba(0,0,0,0.1); transition: all 0.2s ease; touch-action: manipulation;">4</button>
                                    <button class="num-key" data-value="5" style="padding: 12px 8px; font-size: 16px; background: #fff9c4; border: 1px solid #f0e68c; border-radius: 6px; cursor: pointer; box-shadow: 0 2px 4px rgba(0,0,0,0.1); transition: all 0.2s ease; touch-action: manipulation;">5</button>
                                    <button class="num-key" data-value="6" style="padding: 12px 8px; font-size: 16px; background: #fff9c4; border: 1px solid #f0e68c; border-radius: 6px; cursor: pointer; box-shadow: 0 2px 4px rgba(0,0,0,0.1); transition: all 0.2s ease; touch-action: manipulation;">6</button>
                                    <button class="num-key" data-value="-" style="padding: 12px 8px; font-size: 16px; background: #fffde7; border: 1px solid #f0e68c; border-radius: 6px; cursor: pointer; box-shadow: 0 2px 4px rgba(0,0,0,0.1); transition: all 0.2s ease; touch-action: manipulation;">-</button>
                                    <button class="num-key" data-value="7" style="padding: 12px 8px; font-size: 16px; background: #fff9c4; border: 1px solid #f0e68c; border-radius: 6px; cursor: pointer; box-shadow: 0 2px 4px rgba(0,0,0,0.1); transition: all 0.2s ease; touch-action: manipulation;">7</button>
                                    <button class="num-key" data-value="8" style="padding: 12px 8px; font-size: 16px; background: #fff9c4; border: 1px solid #f0e68c; border-radius: 6px; cursor: pointer; box-shadow: 0 2px 4px rgba(0,0,0,0.1); transition: all 0.2s ease; touch-action: manipulation;">8</button>
                                    <button class="num-key" data-value="9" style="padding: 12px 8px; font-size: 16px; background: #fff9c4; border: 1px solid #f0e68c; border-radius: 6px; cursor: pointer; box-shadow: 0 2px 4px rgba(0,0,0,0.1); transition: all 0.2s ease; touch-action: manipulation;">9</button>
                                    <button class="num-key" data-value="." style="padding: 12px 8px; font-size: 16px; background: #fffde7; border: 1px solid #f0e68c; border-radius: 6px; cursor: pointer; box-shadow: 0 2px 4px rgba(0,0,0,0.1); transition: all 0.2s ease; touch-action: manipulation;">.</button>
                                    <button class="num-key" data-value="0" style="padding: 12px 8px; font-size: 16px; background: #fff9c4; border: 1px solid #f0e68c; border-radius: 6px; cursor: pointer; box-shadow: 0 2px 4px rgba(0,0,0,0.1); transition: all 0.2s ease; grid-column: span 2; touch-action: manipulation;">0</button>
                                    <button id="backspace" style="padding: 12px 8px; font-size: 16px; background: #fff59d; border: 1px solid #f0e68c; border-radius: 6px; cursor: pointer; box-shadow: 0 2px 4px rgba(0,0,0,0.1); transition: all 0.2s ease; grid-column: span 2; touch-action: manipulation;"><i class="fas fa-backspace"></i></button>
                                    <button id="clear-all" style="padding: 12px 8px; font-size: 16px; background: #ffee58; border: 1px solid #f0e68c; border-radius: 6px; cursor: pointer; box-shadow: 0 2px 4px rgba(0,0,0,0.1); transition: all 0.2s ease; grid-column: span 4; margin-top: 6px; touch-action: manipulation;">Clear</button>
                                </div>
                                
                                <div style="background: #fff8e1; padding: 12px; border-radius: 8px; margin-top: 15px; border-left: 3px solid #ffca28;">
                                    <p style="margin: 0; font-size: 14px; color: #f57f17;"><strong>Instructions:</strong></p>
                                    <ul style="margin: 8px 0 0 0; padding-left: 20px; font-size: 14px; color: #795548;">
                                        <li>Enter your numerical answer using the keypad above</li>
                                        <li>Use decimal point (.) for decimal values if needed</li>
                                        <li>Use minus (-) for negative values if needed</li>
                                        <li>Use plus (+) for positive values if needed</li>
                                        <li>Do not include units in your answer</li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Left footer with action buttons -->
                <div class="left-footer">
                    <button class="action-btn mark-btn" id="markQuestion">Mark for Review & Next</button>
                    <button class="action-btn clear-btn" id="clearResponse">Clear Response</button>
                    <button class="action-btn prev-btn" id="prevQuestion">Previous</button>
                    <button class="action-btn save-btn" id="nextQuestion">Save & Next</button>
                </div>
            </div>
            
            <!-- Right container - Navigation and its footer -->
            <div class="right-container">
                <!-- Right panel - Navigation -->
                <div class="right-panel">
                    <!-- Candidate info moved to top strip -->
                    
                    <!-- Legend -->
                    <div class="legend">
                        <div class="legend-item">
                            <div class="legend-color answered"></div>
                            <span>Answered</span>
                        </div>
                        <div class="legend-item">
                            <div class="legend-color not-answered"></div>
                            <span>Not Answered</span>
                        </div>
                        <div class="legend-item">
                            <div class="legend-color not-visited"></div>
                            <span>Not Visited</span>
                        </div>
                        <div class="legend-item">
                            <div class="legend-color marked"></div>
                            <span>Marked for Review</span>
                        </div>
                        <div class="legend-item">
                            <div class="legend-color answered-marked"></div>
                            <span>Answered & Marked for Review</span>
                        </div>
                    </div>
                    
                    <!-- Section blue strip -->
                    <div class="section-strip" id="currentSection">
                        Physics Section 1
                    </div>
                    
                    <!-- Question palette -->
                    <div class="question-palette" id="questionPalette">
                        <!-- Chemistry Section 1: 20 questions (25-44) -->
                        <div class="question-btn answered">1</div>
                        <div class="question-btn answered">2</div>
                        <div class="question-btn not-answered active">3</div>
                        <div class="question-btn not-visited">4</div>
                        <div class="question-btn not-visited">5</div>
                        <div class="question-btn not-visited">6</div>
                        <div class="question-btn not-visited">7</div>
                        <div class="question-btn not-visited">8</div>
                        <div class="question-btn not-visited">9</div>
                        <div class="question-btn not-visited">10</div>
                        <div class="question-btn not-visited">11</div>
                        <div class="question-btn not-visited">12</div>
                        <div class="question-btn not-visited">13</div>
                        <div class="question-btn not-visited">14</div>
                        <div class="question-btn not-visited">15</div>
                        <div class="question-btn marked">16</div>
                        <div class="question-btn answered-marked">17</div>
                        <div class="question-btn not-visited">18</div>
                        <div class="question-btn not-visited">19</div>
                        <div class="question-btn not-visited">20</div>
                    </div>
                </div>
                
                <!-- Right footer with submit button -->
                <div class="right-footer">
                    <button class="action-btn submit-btn" id="submitExam">Submit</button>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Submit Confirmation Modal -->
    <div class="modal-overlay" id="submitModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">Submit Exam</h3>
                <button class="modal-close" id="closeSubmitModal">&times;</button>
            </div>
            <div class="modal-body">
                <p>Are you sure you want to submit your exam?</p>
                <p id="summaryText">You have answered <span id="answeredCount">0</span> out of <span id="totalCount">75</span> questions.</p>
            </div>
            <div class="modal-footer">
                <button class="action-btn" id="cancelSubmit">Cancel</button>
                <button class="action-btn submit-btn" id="confirmSubmit">Submit</button>
            </div>
        </div>
    </div>
    
    <!-- Mobile initialization -->
    <script>
        function initMobile() {
            // Check if mobile device
            const isMobile = /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);
            
            if (isMobile) {
                // Prevent zoom on input focus
                document.addEventListener('touchstart', function() {}, {passive: true});
                
                // Handle orientation changes
                window.addEventListener('orientationchange', function() {
                    setTimeout(function() {
                        window.scrollTo(0, 0);
                    }, 100);
                });
                
                // Prevent pull-to-refresh
                document.body.style.overscrollBehavior = 'none';
            } else {
                // Desktop - try fullscreen
                const elem = document.documentElement;
                if (elem.requestFullscreen) {
                    elem.requestFullscreen().catch(() => {});
                }
            }
        }
    </script>
    
    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore-compat.js"></script>
    <script src="firebase-init.js"></script>
    <script src="timer.js"></script>
    <script src="exam-script.js"></script>
    <script src="timer-integration.js"></script>
    <script src="section-info.js"></script>
    
    <script>
        // Exam tracking variables
        let examData = {
            studentId: '',
            studentName: '',
            email: '',
            examId: 'JEE_MAIN_2025_JAN_SHIFT1',
            examName: 'JEE Main Jan 2025 - Shift 1',
            examDate: new Date().toISOString().split('T')[0],
            startTime: new Date().toISOString(),
            endTime: null,
            totalDuration: 180,
            responses: {},
            questionTimes: {},
            subjectTimes: { physics: 0, chemistry: 0, mathematics: 0 },
            currentQuestion: 1,
            totalQuestions: 75
        };
        
        // Time tracking variables
        let questionStartTime = Date.now();
        let currentQuestionId = 1;
        
        // Start time tracking for a question
        function startQuestionTimer(questionId) {
            // Save time for previous question if different
            if (currentQuestionId !== questionId) {
                saveCurrentQuestionTime();
            }
            
            currentQuestionId = questionId;
            questionStartTime = Date.now();
            
            // Initialize question time if not exists
            if (!examData.questionTimes[questionId]) {
                examData.questionTimes[questionId] = 0;
            }
            
            examData.currentQuestion = questionId;
            saveToLocalStorage();
        }
        
        // Save accumulated time for current question
        function saveCurrentQuestionTime() {
            if (questionStartTime && currentQuestionId) {
                const timeSpent = Math.floor((Date.now() - questionStartTime) / 1000);
                examData.questionTimes[currentQuestionId] = (examData.questionTimes[currentQuestionId] || 0) + timeSpent;
                saveToLocalStorage();
            }
        }
        
        // Get total time spent on a question
        function getQuestionTime(questionId) {
            return examData.questionTimes[questionId] || 0;
        }
        
        // Sample questions data (in real app, load from database)
        const questionsData = {
            1: { subject: 'physics', chapter: 'kinematics', correctAnswer: 'B', difficulty: 'easy', type: 'mcq', marks: 4, needsOnScreenKeyboard: 'no' },
            2: { subject: 'physics', chapter: 'mechanics', correctAnswer: 'A', difficulty: 'moderate', type: 'mcq', marks: 4, needsOnScreenKeyboard: 'no' },
            3: { subject: 'physics', chapter: 'thermodynamics', correctAnswer: 'C', difficulty: 'hard', type: 'mcq', marks: 4, needsOnScreenKeyboard: 'no' },
            22: { subject: 'physics', chapter: 'numerical', correctAnswer: '15', difficulty: 'hard', type: 'numerical', marks: 4, needsOnScreenKeyboard: 'yes' },
            // Add more questions as needed
        };
        
        // Initialize exam data
        function initializeExam() {
            // Load from localStorage first
            loadFromLocalStorage();
            
            const loggedInUser = localStorage.getItem('loggedInUser') || sessionStorage.getItem('loggedInUser');
            if (loggedInUser) {
                const userData = JSON.parse(loggedInUser);
                
                // Only set if not already loaded from localStorage
                if (!examData.email) {
                    examData.email = userData.email;
                    examData.studentName = userData.name || userData.email;
                    examData.studentId = 'JEE2024' + Math.random().toString(36).substr(2, 6).toUpperCase();
                    
                    // Get exam ID from localStorage
                    const examId = localStorage.getItem('examId');
                    const examName = localStorage.getItem('examName');
                    if (examId) {
                        examData.examId = examId;
                        examData.examName = examName || examId.replace(/_/g, ' ');
                    }
                    
                    saveToLocalStorage();
                }
                
                // Update UI
                document.getElementById('userName').textContent = examData.studentName;
                document.getElementById('userId').textContent = examData.studentId;
                
                // Update watermarks
                document.querySelectorAll('.watermark-text').forEach(el => {
                    el.textContent = examData.studentId;
                });
            }
        }
        
        // Save exam data to localStorage
        function saveToLocalStorage() {
            localStorage.setItem('examData', JSON.stringify(examData));
        }
        
        // Load exam data from localStorage
        function loadFromLocalStorage() {
            const saved = localStorage.getItem('examData');
            if (saved) {
                const savedData = JSON.parse(saved);
                examData = { ...examData, ...savedData };
            }
        }
        
        // Track question response
        function saveResponse(questionId, answer, isNumerical = false) {
            saveCurrentQuestionTime(); // Save time before creating response
            
            const response = {
                questionId: questionId,
                userAnswer: answer,
                timeSpent: getQuestionTime(questionId),
                timestamp: new Date().toISOString(),
                isAttempted: answer !== null,
                isMarkedForReview: false,
                isNumerical: isNumerical
            };
            
            examData.responses[questionId] = response;
            saveToLocalStorage(); // Save to localStorage after each response
            return response;
        }
        
        // Update question display based on Firebase data
        function updateQuestionDisplay() {
            const questionId = examData.currentQuestion;
            
            if (needsOnScreenKeyboard()) {
                setQuestionType('numerical');
                
                // Clear any selected MCQ options if switching to numerical
                document.querySelectorAll('.option-radio').forEach(radio => {
                    radio.checked = false;
                });
                
                // Load saved numerical answer if it exists
                const savedResponse = examData.responses[questionId];
                if (savedResponse && savedResponse.isNumerical) {
                    document.getElementById('numerical-answer').value = savedResponse.userAnswer || '';
                } else {
                    document.getElementById('numerical-answer').value = '';
                }
            } else {
                setQuestionType('mcq');
                
                // Clear numerical input
                document.getElementById('numerical-answer').value = '';
                
                // Load saved MCQ answer if it exists
                const savedResponse = examData.responses[questionId];
                if (savedResponse && !savedResponse.isNumerical && savedResponse.userAnswer) {
                    const radioId = `q${questionId}-${savedResponse.userAnswer.toLowerCase()}`;
                    const radioElement = document.getElementById(radioId);
                    if (radioElement) radioElement.checked = true;
                }
            }
        }
        
        // Percentile lookup table
        const percentileTable = {
            hard: {
                '291-300': [100, 99.97], '281-290': [99.97, 99.92], '271-280': [99.92, 99.87], '261-270': [99.87, 99.8],
                '251-260': [99.8, 99.7], '241-250': [99.7, 99.5], '231-240': [99.5, 99.3], '221-230': [99.3, 99.1],
                '211-220': [99.1, 98.7], '201-210': [98.7, 98.3], '191-200': [98.3, 98.0], '181-190': [99.0, 98.3],
                '171-180': [97.8, 97.0], '161-170': [97.0, 96.0], '151-160': [96.0, 95.0], '141-150': [95.0, 94.0],
                '131-140': [94.0, 93.0], '121-130': [93.0, 91.5], '111-120': [91.5, 90.0], '101-110': [90.0, 88.0],
                '91-100': [88.0, 86.0], '81-90': [86.0, 83.0], '71-80': [83.0, 80.0], '61-70': [80.0, 76.0],
                '51-60': [76.0, 71.0], '41-50': [71.0, 65.0], '31-40': [65.0, 58.0], '21-30': [58.0, 50.0],
                '11-20': [50.0, 40.0], '1-10': [40.0, 15.0], '0': 15.0, '-1--10': [15.0, 8.0],
                '-11--20': [8.0, 6.0], '-21--30': [6.0, 4.0], '-31--40': [4.0, 3.0], '-41--50': [3.0, 2.0],
                '-51--60': [2.0, 1.0], '-61--75': [1.0, 0.0]
            },
            moderate: {
                '291-300': [100, 99.95], '281-290': [99.95, 99.9], '271-280': [99.9, 99.85], '261-270': [99.85, 99.75],
                '251-260': [99.75, 99.65], '241-250': [99.65, 99.4], '231-240': [99.4, 99.1], '221-230': [99.1, 98.7],
                '211-220': [98.7, 98.3], '201-210': [98.3, 97.5], '191-200': [97.5, 97.0], '181-190': [98.0, 97.5],
                '171-180': [96.8, 96.0], '161-170': [96.0, 94.8], '151-160': [94.8, 93.5], '141-150': [93.5, 92.0],
                '131-140': [92.0, 90.5], '121-130': [90.5, 89.0], '111-120': [89.0, 87.0], '101-110': [87.0, 85.0],
                '91-100': [85.0, 82.0], '81-90': [82.0, 79.0], '71-80': [79.0, 75.0], '61-70': [75.0, 70.0],
                '51-60': [70.0, 65.0], '41-50': [65.0, 60.0], '31-40': [60.0, 52.0], '21-30': [52.0, 45.0],
                '11-20': [45.0, 35.0], '1-10': [35.0, 12.0], '0': 12.0, '-1--10': [12.0, 6.0],
                '-11--20': [6.0, 4.0], '-21--30': [4.0, 2.5], '-31--40': [2.5, 2.0], '-41--50': [2.0, 1.0],
                '-51--60': [1.0, 0.5], '-61--75': [0.5, 0.0]
            },
            easy: {
                '291-300': [100, 99.9], '281-290': [99.9, 99.85], '271-280': [99.85, 99.75], '261-270': [99.75, 99.65],
                '251-260': [99.65, 99.5], '241-250': [99.5, 99.2], '231-240': [99.2, 98.9], '221-230': [98.9, 98.5],
                '211-220': [98.5, 97.8], '201-210': [97.8, 97.0], '191-200': [97.0, 96.0], '181-190': [97.0, 96.0],
                '171-180': [95.8, 94.8], '161-170': [94.8, 93.5], '151-160': [93.5, 92.0], '141-150': [92.0, 90.0],
                '131-140': [90.0, 88.0], '121-130': [88.0, 86.0], '111-120': [86.0, 84.0], '101-110': [84.0, 82.0],
                '91-100': [82.0, 79.0], '81-90': [79.0, 76.0], '71-80': [76.0, 72.0], '61-70': [72.0, 67.0],
                '51-60': [67.0, 62.0], '41-50': [62.0, 55.0], '31-40': [55.0, 48.0], '21-30': [48.0, 40.0],
                '11-20': [40.0, 30.0], '1-10': [30.0, 8.0], '0': 8.0, '-1--10': [8.0, 4.0],
                '-11--20': [4.0, 2.5], '-21--30': [2.5, 1.5], '-31--40': [1.5, 1.0], '-41--50': [1.0, 0.8],
                '-51--60': [0.8, 0.5], '-61--75': [0.5, 0.0]
            }
        };
        
        // Calculate percentile based on marks and difficulty
        function calculatePercentile(marks, difficulty) {
            const table = percentileTable[difficulty];
            
            for (const [range, percentile] of Object.entries(table)) {
                if (range === '0' && marks === 0) return percentile;
                
                const [min, max] = range.includes('-') && !range.startsWith('-') ? 
                    range.split('-').map(Number) : 
                    range.startsWith('-') ? 
                        range.split('--').map(n => parseInt(n)) : 
                        [parseInt(range.split('-')[0]), parseInt(range.split('-')[1])];
                
                if (marks >= min && marks <= max) {
                    return Array.isArray(percentile) ? 
                        (percentile[0] + percentile[1]) / 2 : percentile;
                }
            }
            return 0;
        }
        
        // Determine paper difficulty based on question distribution
        function determinePaperDifficulty() {
            let easy = 0, moderate = 0, hard = 0;
            
            for (let i = 1; i <= examData.totalQuestions; i++) {
                const question = questionsData[i];
                if (question) {
                    if (question.difficulty === 'easy') easy++;
                    else if (question.difficulty === 'moderate') moderate++;
                    else if (question.difficulty === 'hard') hard++;
                }
            }
            
            if (hard >= 30) return 'hard';
            if (easy >= 40) return 'easy';
            return 'moderate';
        }
        
        // Calculate results
        function calculateResults() {
            let correct = 0, incorrect = 0, attempted = 0, unattempted = 0;
            let totalMarks = 0, positiveMarks = 0, negativeMarks = 0;
            let subjectStats = {
                physics: { 
                    correct: 0, incorrect: 0, attempted: 0, unattempted: 0, marks: 0, positiveMarks: 0, negativeMarks: 0,
                    section1: { correct: 0, incorrect: 0, attempted: 0, unattempted: 0, marks: 0, positiveMarks: 0, negativeMarks: 0 },
                    section2: { correct: 0, incorrect: 0, attempted: 0, unattempted: 0, marks: 0, positiveMarks: 0, negativeMarks: 0 }
                },
                chemistry: { 
                    correct: 0, incorrect: 0, attempted: 0, unattempted: 0, marks: 0, positiveMarks: 0, negativeMarks: 0,
                    section1: { correct: 0, incorrect: 0, attempted: 0, unattempted: 0, marks: 0, positiveMarks: 0, negativeMarks: 0 },
                    section2: { correct: 0, incorrect: 0, attempted: 0, unattempted: 0, marks: 0, positiveMarks: 0, negativeMarks: 0 }
                },
                mathematics: { 
                    correct: 0, incorrect: 0, attempted: 0, unattempted: 0, marks: 0, positiveMarks: 0, negativeMarks: 0,
                    section1: { correct: 0, incorrect: 0, attempted: 0, unattempted: 0, marks: 0, positiveMarks: 0, negativeMarks: 0 },
                    section2: { correct: 0, incorrect: 0, attempted: 0, unattempted: 0, marks: 0, positiveMarks: 0, negativeMarks: 0 }
                }
            };
            
            for (let i = 1; i <= examData.totalQuestions; i++) {
                const response = examData.responses[i];
                const question = questionsData[i];
                
                if (!question) continue;
                
                // Determine section (1-20: section1, 21-25: section2 for each subject)
                const section = (i <= 20) ? 'section1' : 'section2';
                
                if (response && response.isAttempted) {
                    attempted++;
                    subjectStats[question.subject].attempted++;
                    subjectStats[question.subject][section].attempted++;
                    
                    if (response.userAnswer === question.correctAnswer) {
                        correct++;
                        subjectStats[question.subject].correct++;
                        subjectStats[question.subject][section].correct++;
                        const marks = question.marks || 4;
                        totalMarks += marks;
                        positiveMarks += marks;
                        subjectStats[question.subject].marks += marks;
                        subjectStats[question.subject].positiveMarks += marks;
                        subjectStats[question.subject][section].marks += marks;
                        subjectStats[question.subject][section].positiveMarks += marks;
                    } else {
                        incorrect++;
                        subjectStats[question.subject].incorrect++;
                        subjectStats[question.subject][section].incorrect++;
                        // Negative marking: -1 for wrong answer
                        totalMarks -= 1;
                        negativeMarks += 1;
                        subjectStats[question.subject].marks -= 1;
                        subjectStats[question.subject].negativeMarks += 1;
                        subjectStats[question.subject][section].marks -= 1;
                        subjectStats[question.subject][section].negativeMarks += 1;
                    }
                } else {
                    unattempted++;
                    subjectStats[question.subject].unattempted++;
                    subjectStats[question.subject][section].unattempted++;
                }
            }
            
            const paperDifficulty = determinePaperDifficulty();
            const percentile = calculatePercentile(totalMarks, paperDifficulty);
            
            return {
                totalQuestions: examData.totalQuestions,
                attempted,
                correct,
                incorrect,
                unattempted,
                totalMarks: Math.max(0, totalMarks),
                positiveMarks,
                negativeMarks,
                maxMarks: examData.totalQuestions * 4,
                accuracy: attempted > 0 ? (correct / attempted * 100).toFixed(1) : 0,
                paperDifficulty,
                percentile: parseFloat(percentile.toFixed(2)),
                subjects: subjectStats
            };
        }
        
        // High Output Low Input chapters
        const highOutputLowInputChapters = [
            // Chemistry
            "Thermodynamics (C)", "Hydrogen", "s Block Elements", "Environmental Chemistry",
            "Solutions", "Electrochemistry", "Chemical Kinetics", "Surface Chemistry",
            "General Principles and Processes of Isolation of Metals", "Coordination Compounds",
            "Amines", "Biomolecules",
            // Mathematics
            "Limits", "Mathematical Reasoning", "Matrices", "Differential Equations", "Vector Algebra",
            // Physics
            "Units and Dimensions", "Motion In One Dimension", "Gravitation", "Thermodynamics",
            "Kinetic Theory of Gases", "Oscillations", "Waves and Sound", "Alternating Current",
            "Electromagnetic Waves", "Dual Nature of Matter", "Nuclear Physics", "Semiconductors",
            "Communication System"
        ];
        
        // Calculate first priority chapters
        function calculateFirstPriorityChapters() {
            const chapterStats = {};
            
            for (let i = 1; i <= 75; i++) {
                const response = examData.responses[i];
                const question = questionsData[i] || {};
                
                if (question.chapter && highOutputLowInputChapters.includes(question.chapter)) {
                    if (!chapterStats[question.chapter]) {
                        chapterStats[question.chapter] = { total: 0, unattempted: 0, incorrect: 0, easy: 0, medium: 0 };
                    }
                    chapterStats[question.chapter].total++;
                    
                    if (question.difficulty === 'easy') chapterStats[question.chapter].easy++;
                    if (question.difficulty === 'moderate') chapterStats[question.chapter].medium++;
                    
                    if (!response || !response.isAttempted) {
                        chapterStats[question.chapter].unattempted++;
                    } else if (response.userAnswer !== question.correctAnswer) {
                        chapterStats[question.chapter].incorrect++;
                    }
                }
            }
            
            const firstPriority = [];
            for (const [chapter, stats] of Object.entries(chapterStats)) {
                if (stats.total === 1 && (stats.unattempted === 1 || stats.incorrect === 1) && (stats.easy > 0 || stats.medium > 0)) {
                    firstPriority.push(chapter);
                } else if (stats.total >= 2 && ((stats.unattempted >= 2) || (stats.unattempted >= 1 && stats.incorrect >= 1)) && (stats.easy > 0 || stats.medium > 0)) {
                    firstPriority.push(chapter);
                }
            }
            
            return firstPriority;
        }
        
        // Calculate focus areas
        function calculateFocusAreas() {
            const chapterStats = {};
            
            for (let i = 1; i <= 75; i++) {
                const response = examData.responses[i];
                const question = questionsData[i] || {};
                
                if (question.chapter) {
                    if (!chapterStats[question.chapter]) {
                        chapterStats[question.chapter] = { total: 0, wrong: 0 };
                    }
                    
                    if (response && response.isAttempted) {
                        chapterStats[question.chapter].total++;
                        if (response.userAnswer !== question.correctAnswer) {
                            chapterStats[question.chapter].wrong++;
                        }
                    }
                    
                    // Add single easy question incorrect to focus areas
                    if (highOutputLowInputChapters.includes(question.chapter) && 
                        question.difficulty === 'easy' && response && response.isAttempted && 
                        response.userAnswer !== question.correctAnswer) {
                        if (!chapterStats[question.chapter].singleEasyIncorrect) {
                            chapterStats[question.chapter].singleEasyIncorrect = true;
                        }
                    }
                }
            }
            
            const focusAreas = [];
            for (const [chapter, stats] of Object.entries(chapterStats)) {
                if ((stats.total >= 3 && stats.wrong >= 2) || (stats.total === 2 && stats.wrong === 2) || stats.singleEasyIncorrect) {
                    focusAreas.push(chapter);
                }
            }
            
            return focusAreas;
        }
        
        // Save to Firebase
        async function saveExamResults() {
            try {
                const results = calculateResults();
                examData.endTime = new Date().toISOString();
                
                // Create 2D array: [questionNo, markedAnswer, correctAnswer, chapter, timeSpent, type, difficulty, questionId, correctIncorrect, status]
                const responsesArray = [];
                for (let i = 1; i <= 75; i++) {
                    const response = examData.responses[i];
                    const question = questionsData[i] || {};
                    
                    let correctIncorrect = 'unattempted';
                    if (response && response.isAttempted) {
                        correctIncorrect = response.userAnswer === question.correctAnswer ? 'correct' : 'incorrect';
                    }
                    
                    let status = 'not visited';
                    if (response) {
                        if (response.isAttempted && response.isMarkedForReview) {
                            status = 'answered and marked for review';
                        } else if (response.isAttempted) {
                            status = 'answered';
                        } else if (response.isMarkedForReview) {
                            status = 'marked for review';
                        } else {
                            status = 'not answered';
                        }
                    }
                    
                    responsesArray.push([
                        i, // question number
                        response ? response.userAnswer || null : null, // marked answer
                        question.correctAnswer || null, // correct answer
                        question.chapter || null, // chapter name
                        response ? response.timeSpent || 0 : 0, // time spent
                        question.type || 'mcq', // numerical or mcq
                        question.difficulty || 'easy', // easy, moderate, hard
                        i, // question id
                        correctIncorrect, // correct/incorrect/unattempted
                        status // answered/not answered/marked for review/answered and marked for review/not visited
                    ]);
                }
                
                const focusAreas = calculateFocusAreas();
                const firstPriorityChapters = calculateFirstPriorityChapters();
                
                const examResult = {
                    studentId: examData.studentId,
                    studentName: examData.studentName,
                    email: examData.email,
                    examId: examData.examId,
                    examName: examData.examName,
                    startTime: examData.startTime,
                    endTime: examData.endTime,
                    responses: responsesArray,
                    focusAreas: focusAreas,
                    firstPriorityChapters: firstPriorityChapters,
                    ...results,
                    submittedAt: new Date().toISOString()
                };
                
                // Get next attempt number
                const db = firebase.firestore();
                const userExamsRef = db.collection('users').doc(examData.email).collection('exams');
                const snapshot = await userExamsRef.where('examId', '==', examData.examId).get();
                const attemptNo = snapshot.size + 1;
                
                // Save to Firebase: /users/{email}/exams/{examId}_attempt_{attemptNo}
                const docId = `${examData.examId}_attempt_${attemptNo}`;
                await userExamsRef.doc(docId).set({...examResult, attemptNo});
                
                console.log('Exam results saved successfully');
                return examResult;
            } catch (error) {
                console.error('Error saving exam results:', error);
                throw error;
            }
        }
        
        // Handle exam submission
        async function handleExamSubmission() {
            try {
                // Save final question time and update localStorage
                saveCurrentQuestionTime();
                examData.endTime = new Date().toISOString();
                saveToLocalStorage();
                
                // Show loading
                document.getElementById('confirmSubmit').innerHTML = '<i class="fas fa-spinner fa-spin"></i> Submitting...';
                document.getElementById('confirmSubmit').disabled = true;
                
                // Load latest data from localStorage and save to Firebase
                loadFromLocalStorage();
                const results = await saveExamResults();
                
                // Clear localStorage after successful submission
                localStorage.removeItem('examData');
                
                // Store results in sessionStorage for result page
                sessionStorage.setItem('examResults', JSON.stringify(results));
                
                // Redirect to result page
                window.location.href = 'result/result.html';
                
            } catch (error) {
                alert('Error submitting exam. Please try again.');
                document.getElementById('confirmSubmit').innerHTML = 'Submit';
                document.getElementById('confirmSubmit').disabled = false;
            }
        }
        
        // Function to toggle question type (MCQ or Numerical)
        function setQuestionType(type) {
            const mcqOptions = document.getElementById('mcqOptions');
            const numericalSection = document.getElementById('numericalSection');
            const virtualKeyboard = document.querySelector('.virtual-keyboard');
            
            if (type === 'numerical') {
                mcqOptions.style.display = 'none';
                numericalSection.style.display = 'block';
                virtualKeyboard.style.display = 'grid';
            } else { // 'mcq'
                mcqOptions.style.display = 'block';
                numericalSection.style.display = 'none';
                virtualKeyboard.style.display = 'none';
            }
        }
        
        // Function to check if current question needs on-screen keyboard
        function needsOnScreenKeyboard() {
            const questionNum = examData.currentQuestion;
            const questionData = questionsData[questionNum];
            return questionData && questionData.needsOnScreenKeyboard === 'yes';
        }
        
        // Hide view instructions on question area click
        function hideViewInstructions() {
            const viewInstructions = document.getElementById('viewInstructions');
            if (viewInstructions) {
                viewInstructions.style.display = 'none';
            }
        }
        
        // Initialize when page loads
        document.addEventListener('DOMContentLoaded', function() {
            initializeExam();
            
            // Hide view instructions when question area is clicked
            const questionArea = document.querySelector('.question-area');
            if (questionArea) {
                questionArea.addEventListener('click', hideViewInstructions);
            }
            
            // Mobile-specific initialization
            if (/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)) {
                // Add mobile class to body
                document.body.classList.add('mobile-device');
                
                // Prevent zoom on double tap
                let lastTouchEnd = 0;
                document.addEventListener('touchend', function (event) {
                    const now = (new Date()).getTime();
                    if (now - lastTouchEnd <= 300) {
                        event.preventDefault();
                    }
                    lastTouchEnd = now;
                }, false);
                
                // Handle orientation change
                window.addEventListener('orientationchange', function() {
                    setTimeout(function() {
                        // Recalculate layout after orientation change
                        window.scrollTo(0, 0);
                        
                        // Trigger resize event to adjust layouts
                        window.dispatchEvent(new Event('resize'));
                    }, 100);
                });
                
                // Improve touch scrolling
                document.body.style.webkitOverflowScrolling = 'touch';
            }
            
            // Handle submit button click
            document.getElementById('confirmSubmit').addEventListener('click', handleExamSubmission);
            
            // Set up on-screen keyboard functionality
            setupVirtualKeyboard();
            
            // Show numerical keyboard for testing
            examData.currentQuestion = 22;
            document.getElementById('mcqOptions').style.display = 'none';
            document.getElementById('numericalSection').style.display = 'block';
            
            // Function to set up the virtual keyboard
            function setupVirtualKeyboard() {
                const numericInput = document.getElementById('numerical-answer');
                const numKeys = document.querySelectorAll('.num-key');
                const backspace = document.getElementById('backspace');
                const clearAll = document.getElementById('clear-all');
                
                // Add touch and click handlers for number keys
                numKeys.forEach(key => {
                    // Prevent double-tap zoom
                    key.addEventListener('touchstart', function(e) {
                        e.preventDefault();
                    }, {passive: false});
                    
                    key.addEventListener('click', function(e) {
                        e.preventDefault();
                        const value = this.getAttribute('data-value');
                        numericInput.value += value;
                        saveNumericalResponse();
                        
                        // Visual feedback
                        this.style.transform = 'scale(0.95)';
                        setTimeout(() => {
                            this.style.transform = 'scale(1)';
                        }, 100);
                    });
                });
                
                // Add touch and click handler for backspace
                backspace.addEventListener('touchstart', function(e) {
                    e.preventDefault();
                }, {passive: false});
                
                backspace.addEventListener('click', function(e) {
                    e.preventDefault();
                    numericInput.value = numericInput.value.slice(0, -1);
                    saveNumericalResponse();
                    
                    // Visual feedback
                    this.style.transform = 'scale(0.95)';
                    setTimeout(() => {
                        this.style.transform = 'scale(1)';
                    }, 100);
                });
                
                // Add touch and click handler for clear all
                clearAll.addEventListener('touchstart', function(e) {
                    e.preventDefault();
                }, {passive: false});
                
                clearAll.addEventListener('click', function(e) {
                    e.preventDefault();
                    numericInput.value = '';
                    saveNumericalResponse();
                    
                    // Visual feedback
                    this.style.transform = 'scale(0.95)';
                    setTimeout(() => {
                        this.style.transform = 'scale(1)';
                    }, 100);
                });
                
                // Prevent native keyboard on mobile
                numericInput.addEventListener('focus', function() {
                    this.blur();
                });
                
                // Function to save the numerical response
                function saveNumericalResponse() {
                    const questionId = examData.currentQuestion;
                    const answer = numericInput.value;
                    if (answer.trim() !== '') {
                        saveResponse(questionId, answer, 30, true); // Mock time spent, mark as numerical
                    } else {
                        // If answer is cleared, save null
                        saveResponse(questionId, null, 30, true);
                    }
                }
            }
            
            // Add click handlers for section tabs
            document.querySelectorAll('.section-tab').forEach(tab => {
                tab.addEventListener('click', function() {
                    // First handle the active tab UI
                    document.querySelectorAll('.section-tab').forEach(t => t.classList.remove('active'));
                    this.classList.add('active');
                    
                    // Update display based on current question number
                    updateQuestionDisplay();
                });
            });
            
            // Add handlers for navigation buttons
            document.getElementById('prevQuestion').addEventListener('click', function() {
                // Your existing prev question logic would be here
                // After changing the question, update display:
                updateQuestionDisplay();
            });
            
            document.getElementById('nextQuestion').addEventListener('click', function() {
                // Save the current answer before moving to next question
                const questionId = examData.currentQuestion;
                
                // Check if current question needs keyboard
                if (needsOnScreenKeyboard()) {
                    const numericalAnswer = document.getElementById('numerical-answer').value;
                    if (numericalAnswer.trim() !== '') {
                        saveResponse(questionId, numericalAnswer, 30, true);
                        
                        // Update the question palette to show this question as answered
                        const questionBtn = document.querySelector(`.question-btn:nth-child(${questionId})`);
                        if (questionBtn) {
                            questionBtn.classList.remove('not-visited', 'not-answered');
                            questionBtn.classList.add('answered');
                        }
                    }
                }
                
                // Your existing next question logic would be here
                // After changing the question, update display:
                updateQuestionDisplay();
            });
            
            document.getElementById('markQuestion').addEventListener('click', function() {
                // Save the current answer and mark for review
                const questionId = examData.currentQuestion;
                
                // Check if current question needs keyboard
                if (needsOnScreenKeyboard()) {
                    const numericalAnswer = document.getElementById('numerical-answer').value;
                    if (numericalAnswer.trim() !== '') {
                        // Save response and mark for review
                        const response = saveResponse(questionId, numericalAnswer, 30, true);
                        if (response) response.isMarkedForReview = true;
                        
                        // Update the question palette to show this question as marked
                        const questionBtn = document.querySelector(`.question-btn:nth-child(${questionId})`);
                        if (questionBtn) {
                            questionBtn.classList.remove('not-visited', 'not-answered');
                            questionBtn.classList.add('answered-marked');
                        }
                    }
                }
                
                // Your existing mark for review logic would be here
                // After changing the question, update display:
                updateQuestionDisplay();
            });
            
            // Also hide on any interaction with question elements
            document.addEventListener('click', function(e) {
                if (e.target.closest('.question-area, .option, .virtual-keyboard')) {
                    hideViewInstructions();
                }
            });
            
            // Start timer for initial question
            startQuestionTimer(examData.currentQuestion);
            
            // Track question changes and responses
            document.addEventListener('change', function(e) {
                const questionId = examData.currentQuestion;
                
                // For MCQ options
                if (e.target.classList.contains('option-radio')) {
                    const answer = e.target.id.split('-')[1].toUpperCase();
                    saveResponse(questionId, answer);
                }
                
                // For numerical input
                if (e.target.id === 'numerical-answer') {
                    const answer = e.target.value;
                    if (answer.trim() !== '') {
                        saveResponse(questionId, answer, true);
                    }
                }
            });
            
            // Also track input for numerical questions
            document.addEventListener('input', function(e) {
                if (e.target.id === 'numerical-answer') {
                    const questionId = examData.currentQuestion;
                    const answer = e.target.value;
                    if (answer.trim() !== '') {
                        saveResponse(questionId, answer, true);
                    }
                }
            });
            
            // Add question navigation handlers to track time
            document.querySelectorAll('.question-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    const questionNum = parseInt(this.textContent);
                    examData.currentQuestion = questionNum;
                    startQuestionTimer(questionNum);
                });
            });
        });
    </script>
</body>
</html>